receivers:
  otlp:
    protocols:
      grpc:
  opencensus:
  jaeger:
    protocols:
      grpc:
      thrift_http:
  zipkin:

exporters:
  otlp:
    endpoint: "otel-collector:4317"
    insecure: true
  logging:
    loglevel: debug

processors:
  batch:
  batch/2:
    send_batch_size: 10000
    timeout: 10s
  memory_limiter:
    # empty config

  memory_limiter/with-settings:
    # check_interval is the time between measurements of memory usage for the
    # purposes of avoiding going over the limits. Defaults to zero, so no
    # checks will be performed. Values below 1 second are not recommended since
    # it can result in unnecessary CPU consumption.
    check_interval: 5s

    # Maximum amount of memory, in MiB, targeted to be allocated by the process heap.
    # Note that typically the total memory usage of process will be about 50MiB higher
    # than this value.
    limit_mib: 4000

    # The maximum, in MiB, spike expected between the measurements of memory usage.
    spike_limit_mib: 500

    # BallastSizeMiB is the size, in MiB, of the ballast size being used by the process.
    # This must match the value of mem-ballast-size-mib command line option (if used)
    # otherwise the memory limiter will not work correctly.
    ballast_size_mib: 2000 

extensions:
  pprof:
    endpoint: :1777
  zpages:
    endpoint: :55679
  health_check:

service:
  extensions: [health_check, pprof, zpages]
  pipelines:
    traces:
      receivers: [otlp, opencensus, jaeger, zipkin]
      processors: [batch]
      exporters: [otlp, logging]
    metrics:
      receivers: [otlp, opencensus]
      processors: [batch]
      exporters: [otlp, logging]
